$(document).ready(function(){$("#PageReviews").live("pagebeforeshow",function(a,b){$('[name="viewport"]').attr("content","width=652, initial-scale=0.45")});$("#PageReviews").live("pagebeforehide",function(a,b){$('[name="viewport"]').attr("content","width=device-width, initial-scale=1.001")});$("#PageForm form").submit(function(){var c=this.id;var b={};b.FormId=c;b.Name=$("#Name").val();b.Course=$("#Course").val();b.Date=$("#Date").val();b.Time=$("#Time").val();b.Phone=$("#Phone").val();b.Email=$("#Email").val();b.PreferredContact=$("#PreferredContact").val();b.TimeToCall=$("#TimeToCall").val();b.Message=$("#Message").val();if(b.PreferredContact===undefined){b.PreferredContact=""}if(b.TimeToCall===undefined){b.TimeToCall=""}$("input").removeClass("Error");var d=clientSideValidation(b);if(d.length>0){for(var a in d){showInputError(d[a])}$(".Error").first().focus()}else{scheduleFormAjax(b)}return false})});function clientSideValidation(a){var b=[];if(!a.Name.match(/^\s*[a-zA-Z\040]{2,}\s*$/)){b.push("Name")}if(a.Course.length<4){b.push("Course")}if(!a.Phone.match(/^([a-zA-Z,#\/ \.\(\)\-\+\*]*[2-9])([a-zA-Z,#\/ \.\(\)\-\+\*]*[0-9]){2}([a-zA-Z,#\/ \.\(\)\-\+\*]*[2-9])([a-zA-Z,#\/ \.\(\)\-\+\*]*[0-9]){6}[0-9a-zA-Z,#\/ \.\(\)\-\+\*]*$/)){b.push("Phone")}if(!a.Email.match(/^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/)){b.push("Email")}if(a.PreferredContact!=="Phone"&&a.PreferredContact!=="Email"){b.push("PreferredContact")}if(a.TimeToCall!==""&&a.TimeToCall!=="Morning"&&a.TimeToCall!=="Afternoon"&&a.TimeToCall!=="Evening"){b.push("TimeToCall")}return b}function scheduleFormAjax(a){$.ajax({url:"php/schedule-form-to-email.php",type:"POST",data:JSON.stringify(a),contentType:"application/json; charset=utf-8",cache:false,dataType:"json",success:ajaxSuccess,error:ajaxError})}function ajaxSuccess(a){if(a.FormDataError){if(a.FormId!=="Form"){$("#FormContainer").addClass("Error FormIdError").html(a.ResponseMessage)}else{for(var b in a.ResponseMessage){showInputError(a.ResponseMessage[b])}}}else{if(a.EmailError){$('#PageForm div[data-role="content"]').addClass("Error EmailError").html(a.ResponseMessage)}else{$('#PageForm div[data-role="content"]').addClass("Success").html(a.ResponseMessage)}}}function ajaxError(b,a){$('#PageForm div[data-role="content"]').addClass("Error AjaxError").html("<div><p>Hmmm &mdash; something went wrong with the form. Please call me at 979-436-2192 or email at spellmantutoring@gmail.com and I&#39;ll get you taken care of!</p><p>Sorry the form didn&#39;t work&mdash;I&#39;ll check it out.</p></div>")}function showInputError(a){$("#"+a).addClass("Error")};