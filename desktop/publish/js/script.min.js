$(document).ready(function(){$('[rel="#ScheduleOverlay"]').overlay();$(".InputContainer span").click(function(){$(this).prev("input, textarea").focus()});$(".InputContainer input, .InputContainer textarea").keydown(function(){$(this).parent(".InputContainer").addClass("ContainsText")});$(".InputContainer input, .InputContainer textarea").change(function(){$(this).parent(".InputContainer").addClass("ContainsText")});$(".InputContainer input, .InputContainer textarea").blur(function(){if($.trim($(this).val())===""){$(this).parent(".InputContainer").removeClass("ContainsText")}});$(function(){if($("#PreferredContactPhone:checked").length===0){$("#TimeToCall").hide()}});$('#Form input[name="preferredcontact"]').change(function(){if($("#PreferredContactPhone").is(":checked")){$("#TimeToCall").show()}else{$("#TimeToCall").hide()}});$("#FormContainer form").submit(function(){var c=this.id;var b={};b.FormId=c;b.Name=$("#"+c+' input[name="realname"]').val();b.Course=$("#"+c+' input[name="course"]').val();b.Date=$("#"+c+' input[name="date"]').val();b.Time=$("#"+c+' input[name="time"]').val();b.Phone=$("#"+c+' input[name="phone"]').val();b.Email=$("#"+c+' input[name="email"]').val();b.PreferredContact=$("#"+c+' input[name="preferredcontact"]:checked').val();b.TimeToCall=$("#"+c+' select[name="timetocall"]').val();b.Message=$("#"+c+' textarea[name="message"]').val();if(b.PreferredContact===undefined){b.PreferredContact=""}if(b.TimeToCall===undefined){b.TimeToCall=""}$("#"+c+" input").removeClass("Error");var d=clientSideValidation(b);if(d.length>0){for(var a in d){showInputError(c,d[a])}$("#"+c+" .Error").first().focus()}else{scheduleFormAjax(b)}return false});$(".Summary").click(function(){showMoreInformation(this.id)})});function clientSideValidation(a){var b=[];if(!a.Name.match(/^\s*[a-zA-Z\040]{2,}\s*$/)){b.push("realname")}if(a.Course.length<4){b.push("course")}if(!a.Phone.match(/^([a-zA-Z,#\/ \.\(\)\-\+\*]*[2-9])([a-zA-Z,#\/ \.\(\)\-\+\*]*[0-9]){2}([a-zA-Z,#\/ \.\(\)\-\+\*]*[2-9])([a-zA-Z,#\/ \.\(\)\-\+\*]*[0-9]){6}[0-9a-zA-Z,#\/ \.\(\)\-\+\*]*$/)){b.push("phone")}if(!a.Email.match(/^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/)){b.push("email")}if(a.PreferredContact!==""&&a.PreferredContact!=="Phone"&&a.PreferredContact!=="Email"){b.push("preferredcontact")}if(a.TimeToCall!==""&&a.TimeToCall!=="Morning"&&a.TimeToCall!=="Afternoon"&&a.TimeToCall!=="Evening"){b.push("timetocall")}return b}function scheduleFormAjax(a){$.ajax({url:"php/schedule-form-to-email.php",type:"POST",data:JSON.stringify(a),contentType:"application/json; charset=utf-8",cache:false,dataType:"json",success:ajaxSuccess,error:ajaxError})}function ajaxSuccess(a){if(a.FormDataError){if(a.FormId!=="Form"){$("#FormContainer").addClass("Error FormIdError").html(a.ResponseMessage)}else{for(var b in a.ResponseMessage){showInputError(a.FormId,a.ResponseMessage[b])}}}else{if(a.EmailError){$("#FormContainer").addClass("Error EmailError").html(a.ResponseMessage)}else{$("#FormContainer").addClass("Success").html(a.ResponseMessage)}}}function ajaxError(b,a){$("#FormContainer").addClass("Error AjaxError").html("<div><p>Hmmm &mdash; something went wrong with the form. Please call me at 979-436-2192 or email at spellmantutoring@gmail.com and I&#39;ll get you taken care of!</p><p>Sorry the form didn&#39;t work &mdash; I&#39;ll check it out.</p></div>")}function showInputError(b,a){$("#"+b+' input[name="'+a+'"]').addClass("Error")}function showMoreInformation(d){if($("body").attr("id").length>0){var b=$("body").attr("id");$("#"+b+"Container").hide();$("#Summary"+b).removeClass("Active")}var a={SummaryMethod:"Method",SummaryExperience:"Experience",SummaryCoursesAndRate:"CoursesAndRate",SummaryReviewsAndTwitter:"ReviewsAndTwitter"};var c=a[d];$("body").addClass("InformationShowing").attr("id",c);$(".Summary").addClass("Inactive");$("#Summary"+c).removeClass("Inactive").addClass("Active");$("#"+c+"Container").show();
$("#MoreInformation").show();scrollToId("Summary")}function scrollToId(a){$("html, body").animate({scrollTop:$("#"+a).offset().top},500)};